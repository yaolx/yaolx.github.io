import"./react.96fb3fa0.js";import{Y as u}from"./index.1f56e35f.js";import"./lodash.2667a9b6.js";import"./markmap.f7526f2f.js";const n={},F="wrapper";function l({components:e,...a}){return u(F,{...n,...a,components:e,mdxType:"MDXLayout"},u("h1",null,u("center",null,"electron \u5F00\u53D1\u4E4B\u4E09\uFF1A\u8FDB\u7A0B\u901A\u8BAF")),u("h2",null,"\u524D\u8A00"),u("p",null,`\u7248\u672C\u53D1\u5E03\u7528\u5230\u4E86 electron \u7684\u51E0\u79CD\u901A\u8BAF\u673A\u5236\uFF0C\u63A5\u4E0B\u6765\u4E3B\u8981\u4ECB\u7ECD\u4E0B\u3002
\u7531\u4E8E electron \u6587\u6863\u63A8\u884C\u7684\u6240\u8C13`,u("inlineCode",{parentName:"p"},"\u4E0A\u4E0B\u6587\u9694\u79BB"),",\u6240\u4EE5\u5C31\u4E0D\u4F7F\u7528 remote \u6A21\u5757,\u6240\u6709\u901A\u4FE1\u65B9\u6CD5\u901A\u8FC7 preload.ts \u8FDB\u884C\u4E2D\u8F6C\u3002"),u("h2",null,"\u4E3B\u8FDB\u7A0B\u3001\u6E32\u67D3\u8FDB\u7A0B\u901A\u8BAF\u65B9\u6CD5"),u("p",null,"\u5728\u4E3B\u8FDB\u7A0B",u("inlineCode",{parentName:"p"},"main.js"),"\u4E2D\uFF0C\u83B7\u53D6 pc \u7AEF\u6570\u636E\u6216\u8005\u89E6\u53D1 pc \u7AEF\u65B9\u6CD5\uFF0C\u5728",u("inlineCode",{parentName:"p"},"preload.js"),`\u4E2D\u901A\u8FC7 contextBridge \u4E2D\u8F6C\uFF0C
\u5C06\u4E00\u4E2A\u5BF9\u8C61`,u("inlineCode",{parentName:"p"},"ipc:{send:xxx,on:xxx}"),"\u6302\u5728\u5230 window \u5BF9\u8C61\u4E0A"),u("pre",null,u("code",{parentName:"pre",className:"language-js"},`contextBridge.exposeInMainWorld('electron', api)
`)),u("h2",null,"on \u548C send"),u("ul",null,u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u4E3B\u8FDB\u7A0B on\uFF0C\u6E32\u67D3\u8FDB\u7A0B send,\u5373\u6E32\u67D3\u8FDB\u7A0B\u7ED9\u4E3B\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F"),u("p",{parentName:"li"},"\u4E3B\u8FDB\u7A0B\u901A\u8FC7 on \u8FDB\u884C\u76D1\u542C"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`ipcMain.on('toolbar', (event, val) => {
  // \u5904\u7406\u8FDB\u7A0B\u4E8B\u4EF6
}
`)),u("p",{parentName:"li"},"\u6E32\u67D3\u901A\u8FC7 send \u53D1\u9001\u4E8B\u4EF6"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`onToolbar: (val) => {
  ipcRenderer.send('toolbar', val)
}
`)),u("p",{parentName:"li"},"\u9875\u9762\u901A\u8FC7\u8C03\u7528",u("inlineCode",{parentName:"p"},"window.electron.onToolbar('mini')"),"\u89E6\u53D1")),u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u4E3B\u8FDB\u7A0B send\uFF0C\u6E32\u67D3\u8FDB\u7A0B on\uFF0C\u5373\u4E3B\u8FDB\u7A0B\u7ED9\u6E32\u67D3\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F"),u("p",{parentName:"li"},"\u4E3B\u8FDB\u7A0B\u901A\u8FC7 send \u53D1\u9001\u6D88\u606F\u7ED9\u6E32\u67D3\u8FDB\u7A0B"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`mainWindow.webContents.send('message', msg)
`)),u("p",{parentName:"li"},"\u6E32\u67D3\u8FDB\u7A0B\u901A\u8FC7 on \u76D1\u542C\u4E8B\u4EF6"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`receive: (func) => {
  ipcRenderer.on('message', (_event, ...args) => func(...args))
}
`)),u("p",{parentName:"li"},"\u9875\u9762\u8C03\u7528"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`window.electron.receive((res) => {
  console.log(res)
})
`)))),u("h2",null,"handle \u548C invoke"),u("p",null,"\u4E5F\u662F\u6E32\u67D3\u8FDB\u7A0B\u7ED9\u4E3B\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F\uFF0C\u800C\u4E14\u80FD\u901A\u8FC7\u5F02\u6B65\u56DE\u8C03\u83B7\u53D6\u4E3B\u8FDB\u7A0B\u7684\u6570\u636E"),u("ul",null,u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u4E3B\u8FDB\u7A0B\u76D1\u542C"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`ipcMain.handle('getAppVersion', () => {
  return app.getVersion()
})
`))),u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u6E32\u67D3\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`updateProgress: (func) => {
  ipcRenderer.on('update_message', (_event, ...args) => func(...args))
}
`))),u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u9875\u9762\u8C03\u7528"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`window.electron.appUpdater.updateProgress((info) => {
  console.log('###', info)
})
`)))),u("h2",null,"\u603B\u7ED3"),u("p",null,"electron \u8FD8\u6709 remote \u6A21\u5757\uFF0C\u6E32\u67D3\u8FDB\u7A0B\u80FD\u901A\u8FC7\u6B64\u6A21\u5757\u8BBF\u95EE\u5230\u4E3B\u8FDB\u7A0B\u7684\u6A21\u5757\u3001\u5BF9\u8C61\u548C\u65B9\u6CD5\u3002\u4F46\u662F remote \u7684\u4E00\u4E9B\u5C40\u9650\u6027\uFF1A"),u("ul",null,u("li",{parentName:"ul"},"\u6027\u80FD\u635F\u8017\u5927\uFF1A\u8DE8\u8FDB\u7A0B\u64CD\u4F5C"),u("li",{parentName:"ul"},"\u5236\u9020\u6DF7\u4E71\uFF1A\u5F02\u6B65\u5BFC\u81F4\u6267\u884C\u987A\u5E8F\u9519\u4E71"),u("li",{parentName:"ul"},"\u5236\u9020\u5047\u8C61\uFF1A\u4EE3\u7406\u5BF9\u8C61\u5BFC\u81F4\u6570\u636E\u6DF7\u4E71"),u("li",{parentName:"ul"},"\u5B89\u5168\u95EE\u9898\uFF1A\u6076\u610F\u4EE3\u7801\u653B\u51FB")),u("p",null,"\u6240\u4EE5\u65B0\u7248\u672C\u4E2D\uFF0C\u5C3D\u91CF\u4F7F\u7528",u("inlineCode",{parentName:"p"},"preload"),"\u505A\u901A\u8BAF\u4E2D\u8F6C\u3002preload \u662F electron \u7684\u9884\u52A0\u8F7D\u673A\u5236\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u5728 electron \u521B\u5EFA\u65F6\u5C06 nodejs \u73AF\u5883\u52A0\u8F7D\u5230\u6E32\u67D3\u8FDB\u7A0B\u4E2D\u4F7F\u7528\u3002\u4F7F\u7528 preload \u7684\u76EE\u7684\u662F\u5728 electron \u4E2D\u4E0D\u5F00\u542F node \u73AF\u5883\u96C6\u6210\u60C5\u51B5\u4E0B\u4F7F\u7528 node \u7684\u6A21\u5757\uFF0C\u907F\u514D\u4E0D\u5B89\u5168\u7684 JavaScript \u4EE3\u7801\u968F\u610F\u4F7F\u7528 node \u73AF\u5883\u3002"))}l.isMDXComponent=!0;export{l as default};
