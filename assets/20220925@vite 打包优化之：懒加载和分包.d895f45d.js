import"./react.103bb038.js";import{bf as u}from"./index.cfa709c1.js";import"./lodash.97b9911e.js";import"./markmap.86774f21.js";const l={},p="wrapper";function n({components:e,...a}){return u(p,{...l,...a,components:e,mdxType:"MDXLayout"},u("h1",null,u("center",null,"vite \u6253\u5305\u4F18\u5316\u4E4B\uFF1A\u61D2\u52A0\u8F7D\u548C\u5206\u5305")),u("h2",null,"\u80CC\u666F"),u("p",null,"\u901A\u8FC7 yarn build \u6253\u5305\u540E\uFF0C\u63A7\u5236\u53F0\u6709\u4EE5\u4E0B\u8F93\u51FA"),u("p",null,u("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/yaolx/picBed@main/blogs/pics/20220925231020.png",alt:"20220925231020"})),u("p",null,`css\uFF1Aindex.02739bc1.css
js\uFF1Aindex.584305a3.js
html:`),u("p",null,"\u8FD9\u662F vite \u9ED8\u8BA4\u7684\u62C6\u5305\u7B56\u7565\uFF0C\u6CA1\u6709\u914D\u7F6E",u("inlineCode",{parentName:"p"},"manualChunks"),`\uFF0C\u5B9E\u73B0\u4E86 css \u4EE3\u7801\u5206\u5272\uFF0C\u4E1A\u52A1\u4EE3\u7801\u548C\u7B2C\u4E09\u65B9\u5E93\u6253\u5305\u5728 index.js \u4E2D\uFF0C\u7F3A\u70B9\u660E\u663E\uFF0C\u6253\u5305\u4EA7\u7269\u81C3\u80BF\uFF0C\u660E\u663E\u6709\u8FDB\u4E00\u6B65\u62C6\u5305\u4F18\u5316\u7684\u7A7A\u95F4\u3002
\u56E0\u4E3A\u6CA1\u6709\u91C7\u7528\u61D2\u52A0\u8F7D\u548C\u5206\u5305\u7B56\u7565\uFF0Cjs \u5305\u5C31\u4E00\u4E2A\uFF0C\u6709 1781K
\u9996\u5C4F\u52A0\u8F7D\u7684\u65F6\u5019\u6709\u70B9\u6162\uFF0C\u5E76\u4E14\u63A7\u5236\u53F0\u6709\u5982\u4E0B\u8B66\u544A`),u("p",null,u("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/yaolx/picBed@main/blogs/pics/20220925222617.png",alt:"20220925222617"})),u("ol",null,u("li",{parentName:"ol"},"\u5EFA\u8BAE\u91C7\u7528 import \u52A8\u6001\u5BFC\u5165"),u("li",{parentName:"ol"},"\u901A\u8FC7 rollup \u7684 manualChunks \u8FDB\u884C\u5206\u5305")),u("p",null,"\u6240\u4EE5\u4EE5\u4E0B\u5C06\u6839\u636E\u8FD9\u4E24\u70B9\uFF0C\u5BF9 vite \u62C6\u5305\u8FDB\u884C\u4F18\u5316\u3002"),u("h2",null,"\u5206\u6790"),u("ol",null,u("li",{parentName:"ol"},u("p",{parentName:"li"},"\u4F7F\u7528",u("inlineCode",{parentName:"p"},"rollup-plugin-visualizer"),"\u5DE5\u5177\u5206\u6790\u5305\u4F53\u79EF")),u("li",{parentName:"ol"},u("p",{parentName:"li"},"build \u7684\u65F6\u5019\u5F00\u542F")),u("li",{parentName:"ol"},u("p",{parentName:"li"},"\u67E5\u770B\u7ED3\u679C"),u("p",{parentName:"li"},u("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/yaolx/picBed@main/blogs/pics/20220925224341.png",alt:"20220925224341"})))),u("ul",null,u("li",{parentName:"ul"},u("p",{parentName:"li"},"lodash\uFF1A500 \u591A K")),u("li",{parentName:"ul"},u("p",{parentName:"li"},"markmap: \u601D\u7EF4\u5BFC\u56FE\u7EC4\u4EF6 600 \u591A K")),u("li",{parentName:"ul"},u("p",{parentName:"li"},"react\uFF1A100 \u591A K"),u("p",{parentName:"li"},"\u8FD9 3 \u4E2A\u5305\u4F53\u79EF\u6BD4\u8F83\u5927"))),u("h2",null,"\u89E3\u51B3\u65B9\u6848"),u("ol",null,u("li",{parentName:"ol"},"\u8DEF\u7531\u61D2\u52A0\u8F7D")),u("ul",null,u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u5F15\u5165 suspense \u548C lazy"),u("p",{parentName:"li"},u("inlineCode",{parentName:"p"},"main.tsx"),"\u5165\u53E3\u901A\u8FC7 suspense \u5305\u88F9\uFF0C\u5E76\u8BBE\u7F6E\u52A0\u8F7D\u4E2D\u7EC4\u4EF6"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`<Suspense fallback={<Spin size="large" className="loading" />}>
  <Router />
</Suspense>
`))),u("li",{parentName:"ul"},u("p",{parentName:"li"},"\u8DEF\u7531\u4E2D\u5C06\u76F4\u63A5\u52A0\u8F7D\u7684\u7EC4\u4EF6\u6539\u4E3A\u61D2\u52A0\u8F7D"),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`import Home from '@/page/home'
\u6539\u4E3A
const Home = lazy(() => import('@/page/home'))
`))),u("li",{parentName:"ul"},u("p",{parentName:"li"},u("inlineCode",{parentName:"p"},"import.meta.globEager")," \u6539\u4E3A ",u("inlineCode",{parentName:"p"},"import.meta.glob")),u("p",{parentName:"li"},"\u52A8\u6001\u8DEF\u7531\u4E2D\u5C06",u("inlineCode",{parentName:"p"},"import.meta.globEager"),"\u6539\u4E3A",u("inlineCode",{parentName:"p"},"import.meta.glob")),u("p",{parentName:"li"},"\u7ECF\u8FC7\u8FD9\u4E09\u6B65\u6539\u9020\u540E\uFF0C\u91CD\u65B0\u6253\u5305"),u("p",{parentName:"li"},u("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/yaolx/picBed@main/blogs/pics/20220925231628.png",alt:"20220925224341"})),u("p",{parentName:"li"},"\u770B\u5230\u5F88\u591A\u6839\u636E\u7EC4\u4EF6\u7EC6\u5206\u51FA\u6765\u7684 js,vendor \u5305\u5C11\u4E86\u5C06\u8FD1 200K"))),u("ol",{start:2},u("li",{parentName:"ol"},u("p",{parentName:"li"},"\u901A\u8FC7",u("inlineCode",{parentName:"p"},"vite-plugin-chunk-split")," \u8FDB\u884C\u5206\u5305\u5904\u7406\uFF0C\u5C06\u7B2C\u4E09\u65B9\u5305\u5206\u79BB\u51FA\u53BB"),u("p",{parentName:"li"},"\u5B89\u88C5",u("inlineCode",{parentName:"p"},"vite-plugin-chunk-split"),`
`,u("inlineCode",{parentName:"p"},"yarn add vite-plugin-chunk-split -D")),u("pre",{parentName:"li"},u("code",{parentName:"pre",className:"language-js"},`import { chunkSplitPlugin } from 'vite-plugin-chunk-split'

isBuild &&
  vitePlugins.push(
    chunkSplitPlugin({
      strategy: 'default',
      customSplitting: {
        'react-vendor': ['react', 'react-dom'],
        lodash: ['lodash'],
        markmap: ['markmap-lib', 'markmap-view']
      }
    })
  )
`)),u("p",{parentName:"li"},"\u518D\u6B21\u6784\u5EFA"),u("p",{parentName:"li"},u("img",{parentName:"p",src:"https://cdn.jsdelivr.net/gh/yaolx/picBed@main/blogs/pics/20220925232027.png",alt:"20220925232027"})),u("p",{parentName:"li"},"\u8FD9\u6B21 vendor \u5305\uFF0C\u53EA\u5269\u4E0B 800 \u591A K"),u("p",{parentName:"li"},"\u9996\u5C4F\u8BBF\u95EE\u901F\u5EA6\u5927\u5927\u63D0\u5347")),u("li",{parentName:"ol"},u("p",{parentName:"li"},"\u5C06",u("inlineCode",{parentName:"p"},"react"),",",u("inlineCode",{parentName:"p"},"lodash"),"\u7B49\u7B2C\u4E09\u65B9\u5305\u653E\u5230 rollup \u7684 externals\uFF0C\u7528 cdn \u52A0\u8F7D"),u("p",{parentName:"li"},"\u8FD9\u6837\u5C06\u4F1A\u66F4\u5927\u7684\u63D0\u5347\u9996\u5C4F\u52A0\u8F7D\u901F\u5EA6"))),u("h2",null,"\u603B\u7ED3"),u("p",null,"\u6B64\u6B21\u6027\u80FD\u4F18\u5316\uFF0C\u4E3B\u8981\u6D89\u53CA",u("inlineCode",{parentName:"p"},"\u7EC4\u4EF6\u61D2\u52A0\u8F7D"),"\uFF0C",u("inlineCode",{parentName:"p"},"chunk-split\u62C6\u5305"),"\uFF0C",u("inlineCode",{parentName:"p"},"\u7B2C\u4E09\u65B9\u5305\u653E\u5165cdn"),",\u6210\u529F\u5C06 vendor \u4F53\u79EF\u5927\u5C0F\u4ECE 1700K \u964D\u5230 800K\uFF0C\u5E76\u4E14\u901A\u8FC7\u61D2\u52A0\u8F7D\u65B9\u5F0F\uFF0C\u52A8\u6001\u52A0\u8F7D\u8DEF\u7531\uFF0C\u6027\u80FD\u5927\u5927\u63D0\u5347"))}n.isMDXComponent=!0;export{n as default};
